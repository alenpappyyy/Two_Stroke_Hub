{% extends "base.html" %}
{% block content %}
<div class="min-h-screen bg-[#0f0f0f] text-white py-12 px-6">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-2">Support Center</h1>
    <p class="text-gray-400 mb-6">Your tickets and support requests are listed here.</p>

   <div class="flex gap-3 mb-6">
  <a href="{% url 'support:create_ticket' %}"
     class="px-4 py-2 bg-orange-600 rounded hover:bg-orange-500">
     Create Ticket
  </a>

  {% if request.user.is_staff %}
    <a href="{% url 'support:admin_dashboard' %}"
       class="px-4 py-2 bg-gray-800 rounded hover:bg-gray-700">
       Admin Dashboard
    </a>
  {% endif %}
</div>


    <div class="space-y-4">
      {% if tickets %}
        {% for t in tickets %}
        <div class="bg-[#171717] p-4 rounded-lg border border-gray-800 flex justify-between items-center">
          <div>
            <a href="{% url 'support:ticket_detail' t.id %}" class="text-lg font-semibold text-white hover:underline">{{ t.subject }}</a>
            <div class="text-sm text-gray-400">Status: <strong>{{ t.status|capfirst }}</strong> â€¢ {{ t.created_at|date:"M d, Y H:i" }}</div>
          </div>
          <div class="text-right">
            <div class="text-sm text-gray-400">By {{ t.user.username }}</div>
            <a href="{% url 'support:ticket_detail' t.id %}" class="mt-2 inline-block px-3 py-1 border rounded text-sm">Open</a>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <p class="text-gray-400">You have no support tickets yet. Create one to get help.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
