{% extends "base.html" %}
{% block content %}
<div class="min-h-screen bg-[#0f0f0f] text-white py-12 px-6">
  <div class="max-w-4xl mx-auto">
    <div class="bg-[#171717] p-6 rounded border border-gray-800">
      <h1 class="text-2xl font-bold mb-2">{{ ticket.subject }}</h1>
      <div class="text-sm text-gray-400 mb-4">From {{ ticket.user.username }} • Created: {{ ticket.created_at|date:"M d, Y H:i" }}</div>

      <div class="space-y-3 mb-6">
        {% for m in messages %}
          <div class="bg-[#0f0f0f] p-3 rounded">
            <div class="text-sm text-gray-400">By {{ m.user.username }} • {{ m.created_at|date:"M d, Y H:i" }}</div>
            <div class="mt-2">{{ m.message|linebreaks }}</div>
          </div>
        {% endfor %}
      </div>

      <form method="post" class="space-y-4">
        {% csrf_token %}
        <div>
          <label class="block text-sm text-gray-300 mb-1">Change Status</label>
          <select name="status" class="w-full bg-[#0f0f0f] p-2 rounded border border-gray-700">
            <option value="open" {% if ticket.status == 'open' %}selected{% endif %}>Open</option>
            <option value="in_progress" {% if ticket.status == 'in_progress' %}selected{% endif %}>In Progress</option>
            <option value="closed" {% if ticket.status == 'closed' %}selected{% endif %}>Closed</option>
          </select>
        </div>

        <div>
          <label class="block text-sm text-gray-300 mb-1">Reply</label>
          <textarea name="message" rows="4" class="w-full bg-[#0f0f0f] p-2 rounded border border-gray-700"></textarea>
        </div>

        <div class="flex gap-3">
          <button type="submit" class="px-4 py-2 bg-orange-600 rounded">Save</button>
          <a href="{% url 'support:admin_dashboard' %}" class="text-gray-300 hover:underline">Back</a>
        </div>
      </form>

    </div>
  </div>
</div>
{% endblock %}
